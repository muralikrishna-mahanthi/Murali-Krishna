{% liquid
  assign sid = 'gift-guide-' | append: section.id
%}

<section id="{{ sid }}" class="gg-banner">
  <div class="gg-topbar">
    <div class="gg-brand">{{ section.settings.brand_text }}</div>
    <div class="gg-tagline">{{ section.settings.top_message }}</div>
    <a class="gg-choose-btn" href="{{ section.settings.choose_gift_link | default: '#' }}">
      <span>{{ section.settings.choose_gift_text }}</span>
      <span class="gg-arrow">→</span>
    </a>
  </div>

  <div class="gg-hero">
    <div class="gg-overlay-content">
      <h1>{{ section.settings.heading }}</h1>
      <div class="gg-copy">{{ section.settings.description }}</div>
      <a class="gg-shop-btn" href="{{ section.settings.shop_now_link | default: '#' }}">
        <span>{{ section.settings.shop_now_text }}</span>
        <span class="gg-arrow">→</span>
      </a>
    </div>
  </div>

  <div class="gg-bottom-strip">{{ section.settings.bottom_strip }}</div>
</section>

<style>
  #{{ sid }} {
    --bg: {{ section.settings.bg_color }};
    --ink: {{ section.settings.text_color }};
    --line: {{ section.settings.border_color }};
    --top-bg: {{ section.settings.topbar_bg }};
    --choose-bg: {{ section.settings.choose_btn_bg }};
    --choose-ink: {{ section.settings.choose_btn_text }};
    --shop-bg: {{ section.settings.shop_btn_bg }};
    --shop-ink: {{ section.settings.shop_btn_text }};
    --max: 1600px;

    background: var(--bg);
    color: var(--ink);
    position: relative;
    overflow: hidden;
  }

  #{{ sid }} .gg-topbar {
    background: var(--top-bg);
    min-height: 74px;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 20px;
    padding: 10px 48px;
    border-bottom: 1px solid #d8d8d8;
  }

  #{{ sid }} .gg-brand,
  #{{ sid }} .gg-tagline,
  #{{ sid }} .gg-choose-btn,
  #{{ sid }} h1,
  #{{ sid }} .gg-copy,
  #{{ sid }} .gg-shop-btn,
  #{{ sid }} .gg-bottom-strip {
    border: 4px solid var(--line);
  }

  #{{ sid }} .gg-brand,
  #{{ sid }} .gg-tagline,
  #{{ sid }} .gg-choose-btn {
    border-width: 4px;
  }

  #{{ sid }} .gg-brand {
    justify-self: start;
    font-size: 48px;
    line-height: 1;
    letter-spacing: 1px;
    font-weight: 500;
    padding: 10px 18px;
    background: #fff;
  }

  #{{ sid }} .gg-tagline {
    justify-self: center;
    background: #fff;
    padding: 10px 26px;
    font-size: 42px;
    line-height: 1;
    white-space: nowrap;
  }

  #{{ sid }} .gg-choose-btn {
    justify-self: end;
    display: inline-flex;
    align-items: center;
    gap: 24px;
    text-decoration: none;
    background: var(--choose-bg);
    color: var(--choose-ink);
    padding: 14px 42px;
    font-size: 42px;
    line-height: 1;
  }

  #{{ sid }} .gg-hero {
    min-height: clamp(620px, 72vh, 980px);
    background-color: var(--bg);
    {% if section.settings.background_image != blank %}
      background-image: url('{{ section.settings.background_image | image_url: width: 3000 }}');
    {% endif %}
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
  }

  #{{ sid }} .gg-overlay-content {
    max-width: var(--max);
    margin: 0 auto;
    padding: clamp(40px, 6vw, 84px) clamp(20px, 4vw, 70px) clamp(44px, 8vw, 100px);
    display: grid;
    gap: 24px;
    justify-items: start;
  }

  #{{ sid }} h1 {
    margin: 0;
    background: #fff;
    padding: 12px 18px;
    font-size: clamp(44px, 5vw, 88px);
    line-height: .98;
    font-weight: 600;
  }

  #{{ sid }} .gg-copy {
    background: #fff;
    padding: 12px 18px;
    max-width: 980px;
    font-size: clamp(28px, 2.2vw, 48px);
    line-height: 1.35;
  }

  #{{ sid }} .gg-shop-btn {
    margin-top: 2px;
    text-decoration: none;
    background: #fff;
    padding: 16px;
    display: inline-block;
  }

  #{{ sid }} .gg-shop-btn > span:first-child,
  #{{ sid }} .gg-shop-btn > .gg-arrow {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: var(--shop-bg);
    color: var(--shop-ink);
    height: 72px;
    font-size: 38px;
    line-height: 1;
    border: 0;
  }

  #{{ sid }} .gg-shop-btn > span:first-child {
    padding: 0 30px;
    border-right: 0;
  }

  #{{ sid }} .gg-shop-btn > .gg-arrow {
    width: 72px;
    margin-left: -6px;
  }

  #{{ sid }} .gg-bottom-strip {
    position: absolute;
    left: 50%;
    bottom: 8px;
    transform: translateX(-50%);
    background: #fff;
    padding: 4px 12px;
    font-size: clamp(14px, 1.2vw, 40px);
    white-space: nowrap;
    z-index: 3;
  }

  #{{ sid }} .gg-arrow {
    font-weight: 500;
  }

  @media (max-width: 1100px) {
    #{{ sid }} .gg-topbar {
      grid-template-columns: 1fr;
      justify-items: center;
      padding: 14px 16px;
      gap: 12px;
    }

    #{{ sid }} .gg-brand,
    #{{ sid }} .gg-tagline,
    #{{ sid }} .gg-choose-btn {
      justify-self: center;
      white-space: normal;
      text-align: center;
    }

    #{{ sid }} .gg-brand {
      font-size: clamp(28px, 5vw, 44px);
    }

    #{{ sid }} .gg-tagline {
      font-size: clamp(18px, 3.2vw, 34px);
      padding: 10px 14px;
    }

    #{{ sid }} .gg-choose-btn {
      font-size: clamp(18px, 3.2vw, 34px);
      gap: 12px;
      padding: 12px 20px;
    }
  }

  @media (max-width: 749px) {
    #{{ sid }} .gg-hero {
      min-height: 78vh;
      background-position: center top;
    }

    #{{ sid }} .gg-overlay-content {
      gap: 16px;
      padding: 26px 14px 72px;
    }

    #{{ sid }} h1 {
      font-size: clamp(36px, 10vw, 58px);
      padding: 10px 12px;
    }

    #{{ sid }} .gg-copy {
      font-size: clamp(18px, 5.2vw, 28px);
      padding: 10px 12px;
      max-width: 100%;
    }

    #{{ sid }} .gg-shop-btn {
      padding: 10px;
    }

    #{{ sid }} .gg-shop-btn > span:first-child,
    #{{ sid }} .gg-shop-btn > .gg-arrow {
      height: 52px;
      font-size: 24px;
    }

    #{{ sid }} .gg-shop-btn > .gg-arrow {
      width: 52px;
      margin-left: -4px;
    }

    #{{ sid }} .gg-bottom-strip {
      font-size: 12px;
      bottom: 6px;
      padding: 4px 8px;
      max-width: calc(100% - 20px);
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
</style>

<script>
  (function () {
    var root = document.getElementById('{{ sid }}');
    if (!root) return;

    // Ensures mobile viewport height behaves consistently across browsers.
    function setVh() {
      root.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px');
    }

    setVh();
    window.addEventListener('resize', setVh);
  })();
</script>

{% schema %}
{
  "name": "Gift Guide Banner",
  "settings": [
    { "type": "image_picker", "id": "background_image", "label": "Background image" },

    { "type": "text", "id": "brand_text", "label": "Brand text", "default": "TISSO VISON" },
    { "type": "text", "id": "top_message", "label": "Top message", "default": "Find the ideal gift for your loved ones." },
    { "type": "text", "id": "choose_gift_text", "label": "Choose gift button text", "default": "CHOOSE GIFT" },
    { "type": "url", "id": "choose_gift_link", "label": "Choose gift button link" },

    { "type": "text", "id": "heading", "label": "Heading", "default": "The Gift Guide" },
    { "type": "textarea", "id": "description", "label": "Description", "default": "Discover Joy: Your Ultimate Holiday Gift Destination. Explore our curated selection and find the perfect gifts to delight your loved ones this holiday season." },

    { "type": "text", "id": "shop_now_text", "label": "Shop now button text", "default": "SHOP NOW" },
    { "type": "url", "id": "shop_now_link", "label": "Shop now button link" },

    { "type": "text", "id": "bottom_strip", "label": "Bottom strip text", "default": "SUSTAINABLE, ETHICALLY MADE CLOTHES IN SIZES XXS TO 6XL" },

    { "type": "color", "id": "bg_color", "label": "Background fallback color", "default": "#e7e7e7" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#111111" },
    { "type": "color", "id": "border_color", "label": "Red outline color", "default": "#ff1e1e" },
    { "type": "color", "id": "topbar_bg", "label": "Top bar background", "default": "#efefef" },

    { "type": "color", "id": "choose_btn_bg", "label": "Choose button background", "default": "#f0e735" },
    { "type": "color", "id": "choose_btn_text", "label": "Choose button text", "default": "#111111" },
    { "type": "color", "id": "shop_btn_bg", "label": "Shop button background", "default": "#000000" },
    { "type": "color", "id": "shop_btn_text", "label": "Shop button text", "default": "#ffffff" }
  ],
  "presets": [
    { "name": "Gift Guide Banner" }
  ]
}
{% endschema %}
